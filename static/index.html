<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI图片生成</title>
    <link href="/ssdscore/static/css/bootstrap.min.css" rel="stylesheet">
    <script src="/ssdscore/static/js/jquery-3.7.1.min.js"></script>
</head>
<body>
    <div class="container-fluid">
        <header class="bg-primary text-white p-3 mb-3">
            <h1 class="text-center">AI图片生成</h1>
        </header>
        <div class="row">
            <!-- 左侧表单 -->
            <aside class="col-md-3">
                <form>
                    <div class="mb-3">
                        <label for="modelSelect" class="form-label">模型</label>
                        <select class="mode" id="modelSelect">
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="promptText" class="form-label">提示词</label>
                        <textarea class="form-control" id="promptText" rows="3"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="negativePromptText" class="form-label">反向提示词</label>
                        <textarea class="form-control" id="negativePromptText" rows="3"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="imageWidth" class="form-label">图像宽度</label>
                        <input type="number" class="form-control" id="imageWidth" value="1024">
                    </div>
                    <div class="mb-3">
                        <label for="imageHeight" class="form-label">图像高度</label>
                        <input type="number" class="form-control" id="imageHeight" value="768">
                    </div>
                    <div class="mb-3">
                        <label for="schedulerSelect" class="form-label">调度器</label>
                        <select class="form-select" id="schedulerSelect">
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="iterationCount" class="form-label">迭代次数</label>
                        <input type="number" class="form-control" id="iterationCount" value="30">
                    </div>
                    <div class="mb-3">
                        <label for="guidanceWeight" class="form-label">指导权重</label>
                        <input type="number" class="form-control" id="guidanceWeight" value="7.0">
                    </div>
                    <div class="mb-3">
                        <label for="imageCount" class="form-label">图片数量</label>
                        <input type="number" class="form-control" id="imageCount" value="1">
                    </div>
                    <div class="mb-3">
                        <label for="randomSeed" class="form-label">随机数种子</label>
                        <input type="number" class="form-control" id="randomSeed" value="-1">
                    </div>
                    <button type="submit" class="btn btn-primary">运行</button>
                </form>
            </aside>
            <!-- 右侧图片展示区 -->
            <main class="col-md-9">
                <div id="imageDisplayArea" class="border p-3">
                    <!-- 图片将在这里显示 -->
                    <p>图片将在提交后显示在此处。</p>
                </div>
            </main>
        </div>
    </div>
    <script src="/ssdscore/static/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function() {
            $.ajax({
                url: '/ssdscore/app/info', // 替换为实际的API地址
                method: 'GET',
                success: function(data) {
                    var modelSelect = $('#modelSelect');
                    modelSelect.empty(); // 清空现有选项
                    $.each(data['data']['models'], function(index, item) {
                        var selected = index === 0 ? ' selected' : '';
                        modelSelect.append('<option value="' + item.id + '" title="' + item.description + '"' + selected + '>' + item.name + '</option>');
                    });

                    var schedulerSelect = $('#schedulerSelect');
                    schedulerSelect.empty();
                    $.each(data['data']['schedulers'], function(index, item) {
                    var selected = index === 0 ? ' selected' : '';
                        schedulerSelect.append('<option value="' + item.id + '"' + selected + '>' + item.name + '</option>');
                    });
                },
                error: function() {
                    alert('请求模型选项失败');
                }
            });
        });
    </script>
</body>
</html>